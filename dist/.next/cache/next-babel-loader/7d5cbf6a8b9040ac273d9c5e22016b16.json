{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\n/* eslint-disable func-names */\n\n/* eslint-disable no-param-reassign */\nimport { reduce, isArray, isEmpty, flatten } from 'lodash';\nimport { createSelector } from 'reselect';\nimport { takeLatest, delay } from 'redux-saga/effects';\nimport { createAction as ReduxCreateAction, handleActions as handleReduxActions } from 'redux-actions';\n\nfunction createAction(type) {\n  var action = ReduxCreateAction(type);\n\n  action.is = function (aType) {\n    return action.toString() === aType;\n  };\n\n  return action;\n}\n/* tslint:disable-next-line */\n\n\nfunction createAsyncAction(action, type) {\n  var _ref;\n\n  return _ref = {}, _defineProperty(_ref, action, createAction(type)), _defineProperty(_ref, \"\".concat(action, \"Success\"), createAction(\"\".concat(type, \"_SUCCESS\"))), _defineProperty(_ref, \"\".concat(action, \"Fail\"), createAction(\"\".concat(type, \"_FAIL\"))), _ref;\n}\n\nfunction createAsyncActions(type) {\n  return [createAction(type), createAction(\"\".concat(type, \"_SUCCESS\")), createAction(\"\".concat(type, \"_FAIL\"))];\n}\n/* tslint:disable */\n\n\nfunction handleActions(actions, initialState) {\n  return handleReduxActions(reduce(actions, function (reducer, handler, action) {\n    reducer[action] = function (state, act) {\n      return handler(state.set('action', action), act);\n    };\n\n    return reducer;\n  }, {}), initialState);\n}\n\nfunction createReducers(stateContext, reducers, initialState) {\n  var preventResetting = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  return _defineProperty({}, stateContext, handleReduxActions(reduce(flatten(reducers), function (reducer, action) {\n    if (isArray(action.on)) {\n      action.on.forEach(function (act) {\n        reducer[act] = action.reducer;\n      });\n    } else reducer[action.on] = action.reducer;\n\n    return reducer;\n  }, preventResetting ? {} : {\n    APP_STATE_RESET: function APP_STATE_RESET() {\n      return initialState;\n    }\n  }), initialState));\n}\n\nexport function createSagas(sagas) {\n  return flatten(sagas).map(function (saga) {\n    var on = saga.on,\n        _saga$effect = saga.effect,\n        effect = _saga$effect === void 0 ? takeLatest : _saga$effect,\n        worker = saga.worker;\n    return /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return effect(on, /*#__PURE__*/_regeneratorRuntime.mark(function _callee(action) {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return delay(0);\n\n                      case 2:\n                        _context.next = 4;\n                        return worker(action);\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    });\n  });\n}\n\nfunction createSelectorsA(context) {\n  var keys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var stateSelector = function stateSelector(state) {\n    return state[context];\n  };\n\n  if (isEmpty(keys)) return stateSelector;\n  return keys.map(function (key) {\n    return function (state) {\n      return isArray(key) ? stateSelector(state).getIn(key) : stateSelector(state).get(key);\n    };\n  });\n}\n\nfunction createSelectors(context, keys) {\n  var stateSelector = function stateSelector(state) {\n    return state[context];\n  };\n\n  return reduce(keys, function (selectors, key) {\n    selectors[\"\".concat(key, \"Selector\")] = function (state) {\n      return stateSelector(state).get(key);\n    };\n\n    return selectors;\n  }, {});\n}\n\nfunction createJSSelectors(context, keys) {\n  var stateSelector = function stateSelector(state) {\n    return state[context];\n  };\n\n  return reduce(keys, function (selectors, key) {\n    selectors[\"\".concat(key, \"Selector\")] = function (state) {\n      return stateSelector(state)[key];\n    };\n\n    return selectors;\n  }, {});\n}\n\nexport { createAction, createAsyncAction, createAsyncActions, createSelectorsA, handleActions, createReducers, createSelectors, createSelector, createJSSelectors };","map":{"version":3,"sources":["E:/programData/React/user/src/lib/redux.ts"],"names":["reduce","isArray","isEmpty","flatten","createSelector","takeLatest","delay","createAction","ReduxCreateAction","handleActions","handleReduxActions","type","action","is","aType","toString","createAsyncAction","createAsyncActions","actions","initialState","reducer","handler","state","act","set","createReducers","stateContext","reducers","preventResetting","on","forEach","APP_STATE_RESET","createSagas","sagas","map","saga","effect","worker","createSelectorsA","context","keys","stateSelector","key","getIn","get","createSelectors","selectors","createJSSelectors"],"mappings":"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","sourcesContent":["/* eslint-disable func-names */\n/* eslint-disable no-param-reassign */\nimport {\n  reduce, isArray, isEmpty, flatten\n} from 'lodash';\nimport { createSelector } from 'reselect';\nimport { takeLatest, delay } from 'redux-saga/effects';\nimport {\n  createAction as ReduxCreateAction,\n  handleActions as handleReduxActions,\n  Action\n} from 'redux-actions';\n\nexport type ActionFunction1<T1, R> = (t1?: T1) => R;\n\nexport interface ActionFunction<Payload>\n  extends ActionFunction1<Payload, Action<Payload>> {\n  is: (type: string) => boolean;\n}\n\nfunction createAction<Payload = any>(type: string): ActionFunction<Payload> {\n  const action = ReduxCreateAction<Payload>(type) as ActionFunction<Payload>;\n  action.is = (aType: string) => action.toString() === aType;\n  return action;\n}\n\n/* tslint:disable-next-line */\nfunction createAsyncAction(action: string, type: string): any {\n  return {\n    [action]: createAction(type),\n    [`${action}Success`]: createAction(`${type}_SUCCESS`),\n    [`${action}Fail`]: createAction(`${type}_FAIL`)\n  };\n}\n\nfunction createAsyncActions<\n  ActionData = any,\n  SuccessData = any,\n  ErrorData = Error\n>(\n  type: string\n): [\n  ActionFunction<ActionData>,\n  ActionFunction<SuccessData>,\n  ActionFunction<ErrorData>\n] {\n  return [\n    createAction<ActionData>(type),\n    createAction<SuccessData>(`${type}_SUCCESS`),\n    createAction<ErrorData>(`${type}_FAIL`)\n  ];\n}\n\n/* tslint:disable */\nfunction handleActions(actions: any, initialState: any) {\n  return handleReduxActions(\n    reduce(\n      actions,\n      (reducer: any, handler, action) => {\n        reducer[action] = (state: any, act: any) => handler(state.set('action', action), act);\n        return reducer;\n      },\n      {}\n    ),\n    initialState\n  );\n}\n\nfunction createReducers(\n  stateContext: string,\n  reducers: any[],\n  initialState: any,\n  preventResetting: boolean = false\n): any {\n  return {\n    [stateContext]: handleReduxActions(\n      reduce(\n        flatten(reducers),\n        (reducer: any, action: any) => {\n          if (isArray(action.on)) {\n            action.on.forEach((act: any) => {\n              reducer[act] = action.reducer;\n            });\n          } else reducer[action.on] = action.reducer;\n          return reducer;\n        },\n        preventResetting\n          ? {}\n          : {\n            APP_STATE_RESET: () => initialState\n          }\n      ),\n      initialState\n    )\n  };\n}\n\nexport function createSagas(sagas: any[]): any[] {\n  return flatten(sagas).map((saga: any) => {\n    const { on, effect = takeLatest, worker } = saga;\n    return function* () {\n      yield effect(on, function* (action: any) {\n        yield delay(0);\n        yield worker(action);\n      });\n    };\n  });\n}\n\nfunction createSelectorsA(context: string, keys: any[] = []): any {\n  const stateSelector = (state: any) => state[context];\n\n  if (isEmpty(keys)) return stateSelector;\n\n  return keys.map((key: any) => (state: any) => (isArray(key)\n    ? stateSelector(state).getIn(key)\n    : stateSelector(state).get(key)));\n}\n\nfunction createSelectors(context: string, keys: string[]): any {\n  const stateSelector = (state: any) => state[context];\n\n  return reduce(\n    keys,\n    (selectors: any, key) => {\n      selectors[`${key}Selector`] = (state: any) => stateSelector(state).get(key);\n      return selectors;\n    },\n    {}\n  );\n}\n\nfunction createJSSelectors(context: string, keys: string[]): any {\n  const stateSelector = (state: any) => state[context];\n\n  return reduce(\n    keys,\n    (selectors: any, key) => {\n      selectors[`${key}Selector`] = (state: any) => stateSelector(state)[key];\n      return selectors;\n    },\n    {}\n  );\n}\n\nexport {\n  createAction,\n  createAsyncAction,\n  createAsyncActions,\n  createSelectorsA,\n  handleActions,\n  createReducers,\n  createSelectors,\n  createSelector,\n  createJSSelectors\n};\n"]},"metadata":{},"sourceType":"module"}