{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { cloneDeep } from 'lodash';\nimport * as pathToRegexp from 'path-to-regexp';\nimport moment from 'moment';\nimport { SORT } from '@services/api-request';\nimport classnames from 'classnames';\n/**\n * Convert an array to a tree-structured array.\n * @param   {array}     array     The Array need to Converted.\n * @param   {string}    id        The alias of the unique ID of the object in the array.\n * @param   {string}    parentId       The alias of the parent ID of the object in the array.\n * @param   {string}    children  The alias of children of the object in the array.\n * @return  {array}    Return a tree-structured array.\n */\n\nexport function arrayToTree(array) {\n  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'id';\n  var parentId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'pid';\n  var children = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'children';\n  var result = [];\n  var hash = {};\n  var data = cloneDeep(array);\n  data.forEach(function (item, index) {\n    hash[data[index][id]] = data[index];\n  });\n  data.forEach(function (item) {\n    var hashParent = hash[item[parentId]];\n\n    if (hashParent) {\n      !hashParent[children] && (hashParent[children] = []);\n      hashParent[children].push(item);\n    } else {\n      result.push(item);\n    }\n  });\n  return result;\n}\n/**\n * Whether the path matches the regexp if the language prefix is ignored, https://github.com/pillarjs/path-to-regexp.\n * @param   {string|regexp|array}     regexp     Specify a string, array of strings, or a regular expression.\n * @param   {string}                  pathname   Specify the pathname to match.\n * @return  {array|null}              Return the result of the match or null.\n */\n\nexport function pathMatchRegexp(regexp, pathname) {\n  return pathToRegexp.pathToRegexp(regexp).exec(pathname);\n}\n/**\n * In an array of objects, specify an object that traverses the objects whose parent ID matches.\n * @param   {array}     array     The Array need to Converted.\n * @param   {string}    current   Specify the object that needs to be queried.\n * @param   {string}    parentId  The alias of the parent ID of the object in the array.\n * @param   {string}    id        The alias of the unique ID of the object in the array.\n * @return  {array}    Return a key array.\n */\n\nexport function queryAncestors(array, current, parentId) {\n  var id = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'id';\n  var result = [current];\n  var hashMap = new Map();\n  array.forEach(function (item) {\n    return hashMap.set(item[id], item);\n  }); // eslint-disable-next-line no-shadow\n\n  var getPath = function getPath(current) {\n    var currentParentId = hashMap.get(current[id])[parentId];\n\n    if (currentParentId) {\n      result.push(hashMap.get(currentParentId));\n      getPath(hashMap.get(currentParentId));\n    }\n  };\n\n  getPath(current);\n  return result;\n}\nexport function getResponseError(data) {\n  if (!data) {\n    return 'Bad request!';\n  }\n\n  if (typeof data === 'string') {\n    return data;\n  }\n\n  if (Array.isArray(data.message)) {\n    var item = data.message[0];\n\n    if (!item.constraints) {\n      return data.error || 'Bad request!';\n    }\n\n    return Object.values(item.constraints)[0];\n  } // TODO - parse for langauge or others\n\n\n  return typeof data.message === 'string' ? data.message : 'Bad request!';\n}\nexport function isMobile() {\n  if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {\n    return true;\n  }\n\n  return false;\n} // eslint-disable-next-line consistent-return\n\nexport function getUrlParameter(sParam) {\n  var sPageURL = decodeURIComponent(window.location.search.substring(1));\n  var sURLVariables = sPageURL.split('&');\n  var sParameterName;\n  var i;\n\n  for (i = 0; i < sURLVariables.length; i += 1) {\n    sParameterName = sURLVariables[i].split('=');\n\n    if (sParameterName[0] === sParam) {\n      return sParameterName[1] === undefined ? true : sParameterName[1];\n    }\n  }\n}\nexport var DAY_OF_WEEK = {\n  mon: 'Monday',\n  tue: 'Tuesday',\n  wed: 'Wednesday',\n  thu: 'Thursday',\n  fri: 'Friday',\n  sat: 'Saturday',\n  sun: 'Sunday'\n};\nexport function getDefaultSchedule() {\n  var defaultVal = {\n    start: null,\n    end: null,\n    closed: true\n  };\n  return {\n    mon: _objectSpread({}, defaultVal),\n    tue: _objectSpread({}, defaultVal),\n    wed: _objectSpread({}, defaultVal),\n    thu: _objectSpread({}, defaultVal),\n    fri: _objectSpread({}, defaultVal),\n    sat: _objectSpread({}, defaultVal),\n    sun: _objectSpread({}, defaultVal)\n  };\n}\nexport function getNextShow(schedule) {\n  var weekDay = parseInt(moment().format('e'), 10);\n  var i = 0;\n  var nextShow;\n  var performerShows = Object.keys(schedule).filter(function (key) {\n    return !schedule[key].closed;\n  });\n\n  do {\n    var date = moment().day(weekDay).format('ddd').toLowerCase();\n\n    if (performerShows.indexOf(date) > -1) {\n      nextShow = date;\n    }\n\n    weekDay += 1;\n    i += 1;\n  } while (i < 7 && !nextShow);\n\n  if (nextShow) {\n    return \"\".concat(schedule[nextShow].start, \" \").concat(moment().day(weekDay - 1).format('DD/MM/YYYY'));\n  }\n\n  return '';\n}\nexport function getSearchData(pagination, filters, sorter, state) {\n  var sort = state.sort,\n      sortBy = state.sortBy,\n      filter = state.filter;\n  var limit = state.limit;\n\n  if (filters) {\n    Object.keys(filters).forEach(function (key) {\n      if (filters[key] && filters[key].length) {\n        // eslint-disable-next-line prefer-destructuring\n        filter[key] = filters[key][0];\n      }\n\n      if (!filters[key]) {\n        filter[key] = '';\n      }\n    });\n  } else {\n    filter = {};\n  }\n\n  if (sorter) {\n    if (sorter.order) {\n      var field = sorter.field,\n          order = sorter.order;\n      sort = SORT[order];\n      sortBy = field;\n    } else {\n      sortBy = 'createdAt';\n      sort = 'desc';\n    }\n  }\n\n  return _objectSpread(_objectSpread(_objectSpread({}, state), filter), {}, {\n    sort: sort,\n    sortBy: sortBy,\n    offset: (pagination.current - 1) * limit\n  });\n}\nexport function getBase64(originFileObj) {\n  var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'uploading';\n  var file = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    if (originFileObj) {\n      reader.readAsDataURL(originFileObj);\n\n      reader.onload = function () {\n        return resolve(_objectSpread(_objectSpread({}, originFileObj), {}, {\n          status: status,\n          name: originFileObj.name,\n          url: reader.result,\n          originFileObj: originFileObj\n        }));\n      };\n\n      reader.onerror = function (error) {\n        return reject(error);\n      };\n    } else {\n      resolve(file);\n    }\n  });\n}\nexport function convertConnectionData(data) {\n  var arr = data.split('%/%');\n  var serverData = arr[1] && JSON.parse(arr[1]);\n  var clientData = arr[0] && JSON.parse(arr[0]);\n  return {\n    serverData: serverData,\n    clientData: clientData\n  };\n}\nexport function checkUserLogin(isLoggedIn, user) {\n  if (!isLoggedIn) return false;\n  if (!user && !user._id) return false;\n  return true;\n}\nexport function getCurrentUser(user, performer) {\n  if (user && user._id) return user;\n  if (performer && performer._id) return performer;\n  return null;\n}\nexport function isPhysicalProduct(item) {\n  if (item && item.type === 'physical') return true;\n  return false;\n}\nexport function chatBoxMessageClassName(req) {\n  var isMine = req.isMine,\n      startsSequence = req.startsSequence,\n      endsSequence = req.endsSequence,\n      type = req.data.type;\n  return classnames('message', {\n    mine: isMine && type !== 'tip'\n  }, {\n    tip: type === 'tip'\n  }, {\n    start: !!startsSequence\n  }, {\n    end: !!endsSequence\n  });\n}\n\nfunction convertFeetToCm(feet, inch) {\n  var _feet$split = feet.split('.'),\n      _feet$split2 = _slicedToArray(_feet$split, 1),\n      f = _feet$split2[0];\n\n  var _inch$split = inch.split('.'),\n      _inch$split2 = _slicedToArray(_inch$split, 1),\n      i = _inch$split2[0];\n\n  return (parseInt(f, 10) * 12 + parseInt(i, 10)) * 2.54;\n}\n\nexport function formatDataWeight() {\n  var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 99;\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 319;\n  var i = min;\n  var result = [];\n\n  do {\n    result[i] = (i * 0.45).toFixed(2);\n    i += 1;\n  } while (i < max);\n\n  return result.map(function (v, index) {\n    return {\n      label: \"\".concat(index, \"  lbs (\").concat(v, \"kg)\"),\n      value: \"\".concat(index, \" lbs\")\n    };\n  });\n}\nexport function formatDataHeight() {\n  var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var result = [];\n\n  for (var feet = min; feet < max; feet += 1) {\n    for (var inch = 0; inch <= 11; inch += 1) {\n      var a = convertFeetToCm(feet.toFixed(1).toString(), inch.toFixed(1).toString());\n      result.push(\"\".concat(feet, \"'\").concat(inch, \"\\\" (\").concat(a.toFixed(2), \" cm)\"));\n    }\n  }\n\n  return result.map(function (f) {\n    return {\n      label: \"\".concat(f),\n      value: \"\".concat(f)\n    };\n  });\n}\nexport function formatPrice(price) {\n  var fractionDigits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n\n  if (price) {\n    return price.toFixed(fractionDigits);\n  }\n\n  return '';\n}","map":{"version":3,"sources":["E:/programData/React/user/src/lib/utils.ts"],"names":["cloneDeep","pathToRegexp","moment","SORT","classnames","arrayToTree","array","id","parentId","children","result","hash","data","forEach","item","index","hashParent","push","pathMatchRegexp","regexp","pathname","exec","queryAncestors","current","hashMap","Map","set","getPath","currentParentId","get","getResponseError","Array","isArray","message","constraints","error","Object","values","isMobile","navigator","userAgent","match","getUrlParameter","sParam","sPageURL","decodeURIComponent","window","location","search","substring","sURLVariables","split","sParameterName","i","length","undefined","DAY_OF_WEEK","mon","tue","wed","thu","fri","sat","sun","getDefaultSchedule","defaultVal","start","end","closed","getNextShow","schedule","weekDay","parseInt","format","nextShow","performerShows","keys","filter","key","date","day","toLowerCase","indexOf","getSearchData","pagination","filters","sorter","state","sort","sortBy","limit","order","field","offset","getBase64","originFileObj","status","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","name","url","onerror","convertConnectionData","arr","serverData","JSON","parse","clientData","checkUserLogin","isLoggedIn","user","_id","getCurrentUser","performer","isPhysicalProduct","type","chatBoxMessageClassName","req","isMine","startsSequence","endsSequence","mine","tip","convertFeetToCm","feet","inch","f","formatDataWeight","min","max","toFixed","map","v","label","value","formatDataHeight","a","toString","formatPrice","price","fractionDigits"],"mappings":"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","sourcesContent":["import { cloneDeep } from 'lodash';\nimport * as pathToRegexp from 'path-to-regexp';\nimport {\n  ISchedule, IUser, IPerformer, IStudio\n} from 'src/interfaces';\nimport moment from 'moment';\nimport { SORT } from '@services/api-request';\nimport classnames from 'classnames';\n\n/**\n * Convert an array to a tree-structured array.\n * @param   {array}     array     The Array need to Converted.\n * @param   {string}    id        The alias of the unique ID of the object in the array.\n * @param   {string}    parentId       The alias of the parent ID of the object in the array.\n * @param   {string}    children  The alias of children of the object in the array.\n * @return  {array}    Return a tree-structured array.\n */\nexport function arrayToTree(\n  array,\n  id = 'id',\n  parentId = 'pid',\n  children = 'children'\n) {\n  const result = [];\n  const hash = {};\n  const data = cloneDeep(array);\n\n  data.forEach((item, index) => {\n    hash[data[index][id]] = data[index];\n  });\n\n  data.forEach((item) => {\n    const hashParent = hash[item[parentId]];\n    if (hashParent) {\n      !hashParent[children] && (hashParent[children] = []);\n      hashParent[children].push(item);\n    } else {\n      result.push(item);\n    }\n  });\n  return result;\n}\n\n/**\n * Whether the path matches the regexp if the language prefix is ignored, https://github.com/pillarjs/path-to-regexp.\n * @param   {string|regexp|array}     regexp     Specify a string, array of strings, or a regular expression.\n * @param   {string}                  pathname   Specify the pathname to match.\n * @return  {array|null}              Return the result of the match or null.\n */\nexport function pathMatchRegexp(regexp, pathname) {\n  return pathToRegexp.pathToRegexp(regexp).exec(pathname);\n}\n\n/**\n * In an array of objects, specify an object that traverses the objects whose parent ID matches.\n * @param   {array}     array     The Array need to Converted.\n * @param   {string}    current   Specify the object that needs to be queried.\n * @param   {string}    parentId  The alias of the parent ID of the object in the array.\n * @param   {string}    id        The alias of the unique ID of the object in the array.\n * @return  {array}    Return a key array.\n */\nexport function queryAncestors(array, current, parentId, id = 'id') {\n  const result = [current];\n  const hashMap = new Map();\n  array.forEach((item) => hashMap.set(item[id], item));\n\n  // eslint-disable-next-line no-shadow\n  const getPath = (current) => {\n    const currentParentId = hashMap.get(current[id])[parentId];\n    if (currentParentId) {\n      result.push(hashMap.get(currentParentId));\n      getPath(hashMap.get(currentParentId));\n    }\n  };\n\n  getPath(current);\n  return result;\n}\n\nexport function getResponseError(data: any) {\n  if (!data) {\n    return 'Bad request!';\n  }\n\n  if (typeof data === 'string') {\n    return data;\n  }\n\n  if (Array.isArray(data.message)) {\n    const item = data.message[0];\n    if (!item.constraints) {\n      return data.error || 'Bad request!';\n    }\n    return Object.values(item.constraints)[0];\n  }\n\n  // TODO - parse for langauge or others\n  return typeof data.message === 'string' ? data.message : 'Bad request!';\n}\n\nexport function isMobile(): boolean {\n  if (\n    navigator.userAgent.match(/Android/i)\n    || navigator.userAgent.match(/webOS/i)\n    || navigator.userAgent.match(/iPhone/i)\n    || navigator.userAgent.match(/iPad/i)\n    || navigator.userAgent.match(/iPod/i)\n    || navigator.userAgent.match(/BlackBerry/i)\n    || navigator.userAgent.match(/Windows Phone/i)\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n// eslint-disable-next-line consistent-return\nexport function getUrlParameter(sParam) {\n  const sPageURL = decodeURIComponent(window.location.search.substring(1));\n  const sURLVariables = sPageURL.split('&');\n  let sParameterName;\n  let i;\n\n  for (i = 0; i < sURLVariables.length; i += 1) {\n    sParameterName = sURLVariables[i].split('=');\n\n    if (sParameterName[0] === sParam) {\n      return sParameterName[1] === undefined ? true : sParameterName[1];\n    }\n  }\n}\n\nexport const DAY_OF_WEEK = {\n  mon: 'Monday',\n  tue: 'Tuesday',\n  wed: 'Wednesday',\n  thu: 'Thursday',\n  fri: 'Friday',\n  sat: 'Saturday',\n  sun: 'Sunday'\n};\n\nexport function getDefaultSchedule() {\n  const defaultVal = { start: null, end: null, closed: true };\n  return {\n    mon: { ...defaultVal },\n    tue: { ...defaultVal },\n    wed: { ...defaultVal },\n    thu: { ...defaultVal },\n    fri: { ...defaultVal },\n    sat: { ...defaultVal },\n    sun: { ...defaultVal }\n  };\n}\n\nexport function getNextShow(schedule: ISchedule): string {\n  let weekDay = parseInt(moment().format('e'), 10);\n  let i = 0;\n  let nextShow: string;\n  const performerShows = Object.keys(schedule).filter(\n    (key) => !schedule[key].closed\n  );\n  do {\n    const date = moment().day(weekDay).format('ddd').toLowerCase();\n    if (performerShows.indexOf(date) > -1) {\n      nextShow = date;\n    }\n    weekDay += 1;\n    i += 1;\n  } while (i < 7 && !nextShow);\n\n  if (nextShow) {\n    return `${schedule[nextShow].start} ${moment()\n      .day(weekDay - 1)\n      .format('DD/MM/YYYY')}`;\n  }\n  return '';\n}\n\nexport function getSearchData(pagination, filters, sorter, state) {\n  let { sort, sortBy, filter } = state;\n  const { limit } = state;\n  if (filters) {\n    Object.keys(filters).forEach((key) => {\n      if (filters[key] && filters[key].length) {\n        // eslint-disable-next-line prefer-destructuring\n        filter[key] = filters[key][0];\n      }\n\n      if (!filters[key]) {\n        filter[key] = '';\n      }\n    });\n  } else {\n    filter = {};\n  }\n\n  if (sorter) {\n    if (sorter.order) {\n      const { field, order } = sorter;\n      sort = SORT[order];\n      sortBy = field;\n    } else {\n      sortBy = 'createdAt';\n      sort = 'desc';\n    }\n  }\n\n  return {\n    ...state,\n    ...filter,\n    sort,\n    sortBy,\n    offset: (pagination.current - 1) * limit\n  };\n}\n\nexport function getBase64(originFileObj, status = 'uploading', file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    if (originFileObj) {\n      reader.readAsDataURL(originFileObj);\n      reader.onload = () => resolve({\n        ...originFileObj,\n        status,\n        name: originFileObj.name,\n        url: reader.result,\n        originFileObj\n      });\n      reader.onerror = (error) => reject(error);\n    } else {\n      resolve(file);\n    }\n  });\n}\n\nexport function convertConnectionData(data) {\n  const arr = data.split('%/%');\n  const serverData = arr[1] && JSON.parse(arr[1]);\n  const clientData = arr[0] && JSON.parse(arr[0]);\n  return {\n    serverData,\n    clientData\n  };\n}\n\nexport function checkUserLogin(isLoggedIn: boolean, user: IUser | IPerformer | IStudio) {\n  if (!isLoggedIn) return false;\n  if (!user && !user._id) return false;\n\n  return true;\n}\n\nexport function getCurrentUser(user: IUser, performer: IPerformer) {\n  if (user && user._id) return user;\n  if (performer && performer._id) return performer;\n\n  return null;\n}\n\nexport function isPhysicalProduct(item) {\n  if (item && item.type === 'physical') return true;\n  return false;\n}\n\nexport function chatBoxMessageClassName(req) {\n  const {\n    isMine,\n    startsSequence,\n    endsSequence,\n    data: { type }\n  } = req;\n  return classnames(\n    'message',\n    { mine: isMine && type !== 'tip' },\n    { tip: type === 'tip' },\n    { start: !!startsSequence },\n    { end: !!endsSequence }\n  );\n}\n\nfunction convertFeetToCm(feet, inch) {\n  const [f] = feet.split('.');\n  const [i] = inch.split('.');\n  return (parseInt(f, 10) * 12 + parseInt(i, 10)) * 2.54;\n}\n\nexport function formatDataWeight(min = 99, max = 319) {\n  let i = min;\n  const result = [];\n  do {\n    result[i] = (i * 0.45).toFixed(2);\n    i += 1;\n  } while (i < max);\n  return result.map((v, index) => ({\n    label: `${index}  lbs (${v}kg)`,\n    value: `${index} lbs`\n  }));\n}\nexport function formatDataHeight(min = 4, max = 7) {\n  const result = [];\n  for (let feet = min; feet < max; feet += 1) {\n    for (let inch = 0; inch <= 11; inch += 1) {\n      const a = convertFeetToCm(\n        feet.toFixed(1).toString(),\n        inch.toFixed(1).toString()\n      );\n      result.push(`${feet}'${inch}\" (${a.toFixed(2)} cm)`);\n    }\n  }\n  return result.map((f) => ({ label: `${f}`, value: `${f}` }));\n}\n\nexport function formatPrice(price: number, fractionDigits = 2) {\n  if (price) {\n    return price.toFixed(fractionDigits);\n  }\n\n  return '';\n}\n"]},"metadata":{},"sourceType":"module"}